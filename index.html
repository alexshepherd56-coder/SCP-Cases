<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>M3 SCP Cases</title>
  <style>
    :root {
      --bg: #ffffff;
      --text: #000000;
      --accent: #d2bc8b;
      --muted: #777;
      --overlay: rgba(255,255,255,0.75);
    }

    html, body {
      margin: 0;
      padding: 0;
      background: var(--bg);
      color: var(--text);
      font-family: Inter, Roboto, system-ui, -apple-system, "Segoe UI", "Helvetica Neue", Arial, sans-serif;
      overflow-x: hidden;
    }

    /* === HEADER (MK style, hides on scroll) === */
    header {
      position: fixed;
      top: 0; left: 0; right: 0;
      height: 120px;
      background: #fff;
      border-bottom: 1px solid #eee;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      text-align: center;
      z-index: 200;
      transition: transform 0.4s ease-in-out, opacity 0.3s ease;
    }
    header.hidden { transform: translateY(-130px); opacity: 0; }
    header h1 {
      margin: 0;
      font-size: 2.2rem;
      letter-spacing: 4px;
      font-weight: 500;
      text-transform: uppercase;
    }
    header h2 {
      margin: 5px 0 0;
      font-size: 1rem;
      letter-spacing: 5px;
      text-transform: uppercase;
      font-weight: 400;
    }

    /* === SIDEBAR === */
    .sidebar {
      position: fixed;
      top: 120px;
      left: 0;
      bottom: 0;
      width: 240px;
      background: #f8f8f8;
      border-right: 1px solid #eee;
      padding: 40px 20px;
      overflow-y: auto;
      transition: top 0.4s ease-in-out;
    }
    header.hidden + .sidebar { top: 0; }

    .sidebar h2 {
      font-size: 0.9rem;
      text-transform: uppercase;
      font-weight: 600;
      letter-spacing: 1.5px;
      margin: 20px 0 10px;
      cursor: pointer;
      transition: color 0.2s;
    }
    .sidebar h2:hover,
    .sidebar h2.active { color: var(--accent); }

    .specialty {
      margin: 4px 0;
      font-size: 0.85rem;
      letter-spacing: 1px;
      cursor: pointer;
      padding-left: 10px;
      border-left: 2px solid transparent;
      transition: all 0.3s;
      display: flex; justify-content: space-between;
    }
    .specialty:hover,
    .specialty.active { border-left-color: var(--accent); color: var(--accent); }

    /* === MAIN === */
    .main {
      margin-left: 240px;
      padding: 160px 60px 80px;
      background: #fff;
      min-height: 100vh;
      transition: padding-top 0.4s ease;
    }
    header.hidden ~ .main { padding-top: 60px; }

    .week {
      text-transform: uppercase;
      font-size: 1.1rem;
      font-weight: 600;
      letter-spacing: 2px;
      margin: 70px 0 25px;
      text-align: left;
    }
    .week::after {
      content: "";
      display: block;
      width: 50px;
      height: 2px;
      background-color: var(--accent);
      margin-top: 10px;
    }

    /* === CASE GRID / CARDS === */
    .case-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      gap: 25px;
    }
    .case-card {
      background: #fff;
      border: 1px solid #e0e0e0;
      height: 90px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-transform: uppercase;
      font-size: 0.8rem;
      letter-spacing: 1px;
      text-align: center;
      color: #000;
      text-decoration: none;
      transition: all 0.25s ease;
      font-family: Inter, Roboto, system-ui, -apple-system, "Segoe UI", "Helvetica Neue", Arial, sans-serif;
      cursor: pointer;
    }
    .case-card:hover { background: #000; color: #fff; transform: scale(1.04); }

    /* === MODAL (white, 60% width, faint gold top border) === */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: var(--overlay);
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 400;
      animation: fadeIn 0.2s ease;
    }
    .modal-backdrop.active { display: flex; }

    .modal-card {
      width: 60vw;
      max-width: 900px;
      max-height: 80vh;
      background: #fff;
      border: 1px solid #e9e9e9;
      box-shadow: 0 10px 40px rgba(0,0,0,0.12);
      border-radius: 10px;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      animation: popIn 0.2s ease;
    }
    .modal-top-accent {
      height: 2px;
      width: 100%;
      background: var(--accent);
      flex: 0 0 auto;
    }
    .modal-header {
      padding: 18px 22px;
      border-bottom: 1px solid #eee;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .modal-title {
      margin: 0;
      font-size: 1.1rem;
      letter-spacing: 1.5px;
      text-transform: uppercase;
      font-weight: 600;
    }
    .modal-close {
      font-size: 22px;
      line-height: 1;
      cursor: pointer;
      border: none;
      background: none;
      color: #333;
    }
    .modal-body {
      padding: 22px;
      overflow: auto;
      line-height: 1.7;
      color: #333;
    }
    .modal-body p { margin: 0; }

    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes popIn  { from { transform: scale(0.98); opacity: 0; } to { transform: scale(1); opacity: 1; } }

    /* === FOOTER === */
    footer {
      position: fixed;
      bottom: 20px;
      left: 30px;
      font-size: 0.85rem;
      letter-spacing: 1px;
      color: var(--muted);
      text-transform: uppercase;
      z-index: 50;
    }
    footer span { color: var(--accent); font-weight: 600; margin-left: 4px; }

    /* === SCROLLBAR === */
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-thumb { background: #ccc; border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: #aaa; }

    @media (max-width: 900px) {
      .sidebar { display: none; }
      .main { margin-left: 0; padding: 140px 30px 80px; }
      header { height: 100px; }
      header h1 { font-size: 1.8rem; }
      footer { left: 0; right: 0; text-align: center; }
      .modal-card { width: 92vw; max-height: 86vh; }
    }
  
    /* ===== Redesigned Full-Screen Modal (Clean Sans-Serif, Gold Accents) ===== */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(255,255,255,0.75);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      display: none;
      z-index: 400;
    }
    .modal-backdrop.active { display: block; }
    .modal-card {
      position: fixed;
      top: 24px;
      left: 50%;
      transform: translateX(-50%);
      width: min(1100px, 94vw);
      height: calc(100vh - 48px);
      background: #fff;
      border: 1px solid #ece7dd;
      box-shadow: 0 20px 60px rgba(0,0,0,0.12);
      border-radius: 14px;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }
    .modal-header {
      position: sticky; top: 0; background: #fff; z-index: 2;
      border-bottom: 1px solid #efe8d9;
      padding: 14px 18px; display: flex; align-items: center; gap: 12px;
    }
    .modal-back-link {
      font-size: 0.95rem; letter-spacing: 0.3px; color: #333; background: none; border: none;
      cursor: pointer; padding: 6px 10px; border-radius: 8px;
    }
    .modal-back-link:hover { background: #f3efe6; }
    .modal-title { margin: 0; font-size: 1.15rem; font-weight: 700; letter-spacing: 0.3px; flex: 1 1 auto; }
    .modal-close { font-size: 24px; line-height: 1; cursor: pointer; border: none; background: none; color: #333; padding: 6px 8px; border-radius: 8px; }
    .modal-close:hover { background: #f3efe6; }
    .modal-top-accent { display: none; }
    .modal-body { overflow-y: auto; padding: 18px 22px 24px; line-height: 1.65; color: #222; }
    .meta { display: flex; gap: 10px; flex-wrap: wrap; color: #666; font-size: 0.9rem; margin-bottom: 10px; }
    .meta .dot { width:6px; height:6px; background:#c2a676; border-radius:50%; display:inline-block; margin: 0 8px; }
    .section { margin-top: 18px; }
    .section h3 { font-size: 0.95rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.8px; margin: 0 0 8px; padding-bottom: 6px; border-bottom: 2px solid #c2a676; }
    .case-text p { margin: 0 0 10px; }
    .qa-card { border: 1px solid #eee5d0; background: #faf7ef; border-radius: 12px; padding: 12px 14px; margin: 12px 0; box-shadow: 0 1px 0 rgba(0,0,0,0.02); }
    .qa-q { font-weight: 600; margin-bottom: 8px; }
    .qa-toggle { background: #c2a676; color: #fff; border: none; padding: 8px 12px; border-radius: 8px; cursor: pointer; font-weight: 600; margin-top: 4px; }
    .qa-toggle:hover { filter: brightness(0.95); }
    .qa-a { margin-top: 10px; display: none; }
    .qa-a ul { margin: 8px 0 0 18px; }
    .qa-a li { margin: 6px 0; }
    .case-image { text-align: center; margin: 14px 0; }
    .case-image img { max-width: 100%; height: auto; border-radius: 8px; border: 1px solid #eee; }

  </style>
</head>
<body>

  <!-- HEADER -->
  <header id="pageHeader">
    <h1>M3 SCP</h1>
    <h2>Cases</h2>
  </header>

  <!-- SIDEBAR WITH FILTERS + COUNTS -->
  <div class="sidebar">
    <h2 data-group="all" class="active">All SCPs <span class="count">(0)</span></h2>

    <h2 data-group="medicine">Medicine <span class="count">(0)</span></h2>
    <div class="specialty" data-filter="cardiology">Cardiology <span class="count">(0)</span></div>
    <div class="specialty" data-filter="psychiatry">Psychiatry <span class="count">(0)</span></div>
    <div class="specialty" data-filter="paediatrics">Paediatrics <span class="count">(0)</span></div>
    <div class="specialty" data-filter="neurology">Neurology <span class="count">(0)</span></div>
    <div class="specialty" data-filter="gastroenterology">Gastroenterology <span class="count">(0)</span></div>
    <div class="specialty" data-filter="endocrinology">Endocrinology <span class="count">(0)</span></div>
    <div class="specialty" data-filter="renal">Renal <span class="count">(0)</span></div>
    <div class="specialty" data-filter="respiratory">Respiratory <span class="count">(0)</span></div>
    <div class="specialty" data-filter="rheumatology">Rheumatology <span class="count">(0)</span></div>
    <div class="specialty" data-filter="og">O&amp;G <span class="count">(0)</span></div>
    <div class="specialty" data-filter="haematology">Haematology <span class="count">(0)</span></div>

    <h2 data-group="surgery">Surgery <span class="count">(0)</span></h2>
    <div class="specialty" data-filter="git">GIT <span class="count">(0)</span></div>
    <div class="specialty" data-filter="general">General <span class="count">(0)</span></div>
    <div class="specialty" data-filter="breast">Breast &amp; Endocrine <span class="count">(0)</span></div>
    <div class="specialty" data-filter="ortho">Ortho <span class="count">(0)</span></div>
    <div class="specialty" data-filter="vascular">Vascular <span class="count">(0)</span></div>
  </div>

  <!-- MAIN CONTENT -->
  <div class="main">
    <!-- Week 1 - Cardiology -->
    <div class="week" data-specialties="cardiology">Week 1 - Cardiology</div>
    <div class="case-grid">
      <div class="case-card cardiology" data-title="1.1 Hypertension">1.1 Hypertension</div>
      <div class="case-card cardiology" data-title="1.2 Chest Pain (SDL)">1.2 Chest Pain (SDL)</div>
      <div class="case-card cardiology" data-title="1.3 Heart Failure">1.3 Heart Failure</div>
      <div class="case-card cardiology" data-title="1.4 Hyperlipidaemia (Acquired)">1.4 Hyperlipidaemia (Acquired)</div>
      <div class="case-card cardiology" data-title="1.5 Obesity">1.5 Obesity</div>
      <div class="case-card cardiology" data-title="1.6 Smoking Cessation (SDL)">1.6 Smoking Cessation (SDL)</div>
    </div>

    <!-- Week 2 - Cardiology -->
    <div class="week" data-specialties="cardiology">Week 2 - Cardiology</div>
    <div class="case-grid">
      <div class="case-card cardiology" data-title="2.2 Cardiomyopathy (Dilated) [SDL]">2.2 Cardiomyopathy (Dilated) [SDL]</div>
      <div class="case-card cardiology" data-title="2.3 Stable Angina">2.3 Stable Angina</div>
      <div class="case-card cardiology" data-title="2.4 Unstable Angina">2.4 Unstable Angina</div>
      <div class="case-card cardiology" data-title="2.5 Myocardial Infarction">2.5 Myocardial Infarction</div>
      <div class="case-card cardiology" data-title="2.6 Hyperlipidaemia (Congenital) [SDL]">2.6 Hyperlipidaemia (Congenital) [SDL]</div>
    </div>

    <!-- Week 3 - General Surgery -->
    <div class="week" data-specialties="general">Week 3 - General Surgery</div>
    <div class="case-grid">
      <div class="case-card general" data-title="3.1 Peri-Operative Management">3.1 Peri-Operative Management</div>
      <div class="case-card general" data-title="3.2 Appendicitis">3.2 Appendicitis</div>
      <div class="case-card general" data-title="3.3 Surgical Wound Management [SDL]">3.3 Surgical Wound Management [SDL]</div>
      <div class="case-card general" data-title="3.4 Post Operative Fever [SDL]">3.4 Post Operative Fever [SDL]</div>
      <div class="case-card general" data-title="3.5 Pancreatitis">3.5 Pancreatitis</div>
      <div class="case-card general" data-title="3.6 Cholecystitis &amp; Biliary Colic">3.6 Cholecystitis &amp; Biliary Colic</div>
      <div class="case-card general" data-title="3.7 Choledocolethiasis &amp; Cholecystectomy [SDL]">3.7 Choledocolethiasis &amp; Cholecystectomy [SDL]</div>
    </div>

    <!-- Week 4 - O&G -->
    <div class="week" data-specialties="og">Week 4 - O&amp;G</div>
    <div class="case-grid">
      <div class="case-card og" data-title="4.1 Pre-Conception Care">4.1 Pre-Conception Care</div>
      <div class="case-card og" data-title="4.2 Antenatal Care">4.2 Antenatal Care</div>
      <div class="case-card og" data-title="4.3 Bleeding in Early Pregnancy">4.3 Bleeding in Early Pregnancy</div>
      <div class="case-card og" data-title="4.4 Ectopic Pregnancy">4.4 Ectopic Pregnancy</div>
      <div class="case-card og" data-title="4.5 Vulvovaginitis (Adolescence) [SDL]">4.5 Vulvovaginitis (Adolescence) [SDL]</div>
      <div class="case-card og" data-title="4.6 Dysmenorrhea &amp; Menorrhagia (Adolescence)">4.6 Dysmenorrhea &amp; Menorrhagia (Adolescence)</div>
      <div class="case-card og" data-title="4.7 Contraception (Adolescence)">4.7 Contraception (Adolescence)</div>
    </div>

    <!-- Week 5 - Psychiatry (NEW) -->
    <div class="week" data-specialties="psychiatry">Week 5 - Psychiatry</div>
    <div class="case-grid">
      <div class="case-card psychiatry" data-title="5.1 Self Harm & Suicide [SDL]">5.1 Self Harm & Suicide [SDL]</div>
      <div class="case-card psychiatry" data-title="5.2 Anxiety Disorders">5.2 Anxiety Disorders</div>
      <div class="case-card psychiatry" data-title="5.3 Depression">5.3 Depression</div>
      <div class="case-card psychiatry" data-title="5.4 Bipolar Disorder">5.4 Bipolar Disorder</div>
      <div class="case-card psychiatry" data-title="5.5 (from screenshot)">5.5 (from screenshot)</div>
      <div class="case-card psychiatry" data-title="5.6 (from screenshot)">5.6 (from screenshot)</div>
    </div>

    <!-- Week 6 - Paediatrics -->
    <div class="week" data-specialties="paediatrics">Week 6 - Paediatrics</div>
    <div class="case-grid">
      <div class="case-card paediatrics" data-title="6.1 T1D (New Diagnosis)">6.1 T1D (New Diagnosis)</div>
      <div class="case-card paediatrics" data-title="6.2 T1D (Ongoing Management)">6.2 T1D (Ongoing Management)</div>
      <div class="case-card paediatrics" data-title="6.3 Cystic Fibrosis">6.3 Cystic Fibrosis</div>
      <div class="case-card paediatrics" data-title="6.4 Growth (Short Stature)">6.4 Growth (Short Stature)</div>
    </div>

    <!-- Week 7 - Respiratory (NEW) -->
    <div class="week" data-specialties="respiratory">Week 7 - Respiratory</div>
    <div class="case-grid">
      <div class="case-card respiratory" data-title="7.1 Asthma Exacerbation">7.1 Asthma Exacerbation</div>
      <div class="case-card respiratory" data-title="7.2 Severe Asthma">7.2 Severe Asthma</div>
      <div class="case-card respiratory" data-title="7.3 COPD">7.3 COPD</div>
      <div class="case-card respiratory" data-title="7.4 Bronchiectasis [SDL]">7.4 Bronchiectasis [SDL]</div>
      <div class="case-card respiratory" data-title="7.5 Cystic Fibrosis [SDL]">7.5 Cystic Fibrosis [SDL]</div>
      <div class="case-card respiratory" data-title="7.6 Community Acquired Pneumonia">7.6 Community Acquired Pneumonia</div>
    </div>

    <!-- Week 8 - GIT Surgery -->
    <div class="week" data-specialties="git">Week 8 - GIT Surgery</div>
    <div class="case-grid">
      <div class="case-card git" data-title="8.1 Diverticular Disease">8.1 Diverticular Disease</div>
      <div class="case-card git" data-title="8.2 Colorectal Polyps &amp; Cancer">8.2 Colorectal Polyps &amp; Cancer</div>
      <div class="case-card git" data-title="8.3 IBD (UC &amp; Chrons)">8.3 IBD (UC &amp; Chrons)</div>
      <div class="case-card git" data-title="8.4 LBO [SDL]">8.4 LBO [SDL]</div>
      <div class="case-card git" data-title="8.5 Internal &amp; External Haemorrhoids">8.5 Internal &amp; External Haemorrhoids</div>
      <div class="case-card git" data-title="8.6 Perianal Access &amp; Fistula">8.6 Perianal Access &amp; Fistula</div>
      <div class="case-card git" data-title="8.7 Anal Fissures, Cancers and STIs [SDL]">8.7 Anal Fissures, Cancers and STIs [SDL]</div>
    </div>

    <!-- Week 9 - Paediatrics -->
    <div class="week" data-specialties="paediatrics">Week 9 - Paediatrics</div>
    <div class="case-grid">
      <div class="case-card paediatrics" data-title="9.1 Asthma (ED)">9.1 Asthma (ED)</div>
      <div class="case-card paediatrics" data-title="9.2 Poisoning &amp; Envenomation">9.2 Poisoning &amp; Envenomation</div>
      <div class="case-card paediatrics" data-title="9.3 DDH">9.3 DDH</div>
      <div class="case-card paediatrics" data-title="9.4 Common Surgical Conditions in Kids">9.4 Common Surgical Conditions in Kids</div>
      <div class="case-card paediatrics" data-title="9.6 Neonatal Resuscitation">9.6 Neonatal Resuscitation</div>
      <div class="case-card paediatrics" data-title="9.7 Infections at Birth">9.7 Infections at Birth</div>
    </div>

    <!-- Week 10 - Respiratory (NEW) -->
    <div class="week" data-specialties="respiratory">Week 10 - Respiratory</div>
    <div class="case-grid">
      <div class="case-card respiratory" data-title="10.1 Obstructive Sleep Apnoea">10.1 Obstructive Sleep Apnoea</div>
      <div class="case-card respiratory" data-title="10.2 Pneumonia [SDL]">10.2 Pneumonia [SDL]</div>
      <div class="case-card respiratory" data-title="10.3 Tuberculosis [SDL]">10.3 Tuberculosis [SDL]</div>
      <div class="case-card respiratory" data-title="10.4 Bronchial Cancer">10.4 Bronchial Cancer</div>
      <div class="case-card respiratory" data-title="10.5 Interstitial Lung Disease & Sarcoidosis">10.5 Interstitial Lung Disease & Sarcoidosis</div>
      <div class="case-card respiratory" data-title="10.6 Pulmonary Embolism">10.6 Pulmonary Embolism</div>
    </div>

    <!-- Week 11 - General Surgery & Breast -->
    <div class="week" data-specialties="general breast">Week 11 - General Surgery &amp; Breast</div>
    <div class="case-grid">
      <div class="case-card general" data-title="11.1 Inguinal Hernias">11.1 Inguinal Hernias</div>
      <div class="case-card general" data-title="11.2 Umbilical Hernias">11.2 Umbilical Hernias</div>
      <div class="case-card breast" data-title="11.3 Breast Cancers [SDL]">11.3 Breast Cancers [SDL]</div>
      <div class="case-card breast" data-title="11.4 Benign Breast Conditions">11.4 Benign Breast Conditions</div>
      <div class="case-card breast" data-title="11.5 Breast Cancer (new diagnosis)">11.5 Breast Cancer (new diagnosis)</div>
      <div class="case-card breast" data-title="11.6 Breast Cancer (Terminal)">11.6 Breast Cancer (Terminal)</div>
      <div class="case-card general" data-title="11.7 Electrolyte Management [SDL]">11.7 Electrolyte Management [SDL]</div>
    </div>

    <!-- Week 12 - Paediatrics -->
    <div class="week" data-specialties="paediatrics">Week 12 - Paediatrics</div>
    <div class="case-grid">
      <div class="case-card paediatrics" data-title="12.1 Febrile Seizures">12.1 Febrile Seizures</div>
      <div class="case-card paediatrics" data-title="12.2 Afebrile Seizures (Epilepsy)">12.2 Afebrile Seizures (Epilepsy)</div>
      <div class="case-card paediatrics" data-title="12.3 Headache (Migraine)">12.3 Headache (Migraine)</div>
      <div class="case-card paediatrics" data-title="12.4 Hydrocephalus">12.4 Hydrocephalus</div>
      <div class="case-card paediatrics" data-title="12.5 Neural Tube Defects">12.5 Neural Tube Defects</div>
      <div class="case-card paediatrics" data-title="12.6 Developmental Delay (Cerebral Palsy)">12.6 Developmental Delay (Cerebral Palsy)</div>
    </div>

    <!-- Week 13 - O&G -->
    <div class="week" data-specialties="og">Week 13 - O&amp;G</div>
    <div class="case-grid">
      <div class="case-card og" data-title="13.1 Normal Vs Abnormal Labour">13.1 Normal Vs Abnormal Labour</div>
      <div class="case-card og" data-title="13.2 Labour (Obstetric Emergencies)">13.2 Labour (Obstetric Emergencies)</div>
      <div class="case-card og" data-title="13.3 Analgesia in Birth &amp; Cesarian">13.3 Analgesia in Birth &amp; Cesarian</div>
      <div class="case-card og" data-title="13.4 Prematurity &amp; Neonatal Resusitation">13.4 Prematurity &amp; Neonatal Resusitation</div>
    </div>

    <!-- Week 14 - Renal (NEW) -->
    <div class="week" data-specialties="renal">Week 14 - Renal</div>
    <div class="case-grid">
      <div class="case-card renal" data-title="14.1 UTI">14.1 UTI</div>
      <div class="case-card renal" data-title="14.2 Renal Calculi">14.2 Renal Calculi</div>
      <div class="case-card renal" data-title="14.3 Nephrotic Syndrome (Glomerulonephritis)">14.3 Nephrotic Syndrome (Glomerulonephritis)</div>
      <div class="case-card renal" data-title="14.4 Diabetic Nephropathy [SDL]">14.4 Diabetic Nephropathy [SDL]</div>
      <div class="case-card renal" data-title="14.5 Haematuria [SDL]">14.5 Haematuria [SDL]</div>
      <div class="case-card renal" data-title="14.6 Prostate Cancer">14.6 Prostate Cancer</div>
    </div>

    <!-- Week 15 - Psychiatry (NEW) -->
    <div class="week" data-specialties="psychiatry">Week 15 - Psychiatry</div>
    <div class="case-grid">
      <div class="case-card psychiatry" data-title="15.1 Self Harm & Suicide [SDL]">15.1 Self Harm & Suicide [SDL]</div>
      <div class="case-card psychiatry" data-title="15.2 Anxiety Disorders">15.2 Anxiety Disorders</div>
      <div class="case-card psychiatry" data-title="15.3 Depression">15.3 Depression</div>
      <div class="case-card psychiatry" data-title="15.4 Bipolar Disorder">15.4 Bipolar Disorder</div>
      <div class="case-card psychiatry" data-title="15.5 Personality Disorders">15.5 Personality Disorders</div>
      <div class="case-card psychiatry" data-title="15.6 (from screenshot)">15.6 (from screenshot)</div>
    </div>

    <!-- Week 16 - Paediatrics -->
    <div class="week" data-specialties="paediatrics">Week 16 - Paediatrics</div>
    <div class="case-grid">
      <div class="case-card paediatrics" data-title="16.1 Noonan Syndrome">16.1 Noonan Syndrome</div>
      <div class="case-card paediatrics" data-title="16.2 Pyloric Stenosis">16.2 Pyloric Stenosis</div>
      <div class="case-card paediatrics" data-title="16.3 Acute Diarrhoea">16.3 Acute Diarrhoea</div>
      <div class="case-card paediatrics" data-title="16.4 Chronic Diarrhoea &amp; Malabsorption">16.4 Chronic Diarrhoea &amp; Malabsorption</div>
      <div class="case-card paediatrics" data-title="16.5 Febrile Child &amp; Vaccination">16.5 Febrile Child &amp; Vaccination</div>
      <div class="case-card paediatrics" data-title="16.6 Teething [SDL]">16.6 Teething [SDL]</div>
    </div>

    <!-- Week 17 - Endocrinology -->
    <div class="week" data-specialties="endocrinology">Week 17 - Endocrinology</div>
    <div class="case-grid">
      <div class="case-card endocrinology" data-title="17.1 Primary Hypothyroidism">17.1 Primary Hypothyroidism</div>
      <div class="case-card endocrinology" data-title="17.2 Graves Disease">17.2 Graves Disease</div>
      <div class="case-card endocrinology" data-title="17.3 Thyroid Mass [SDL]">17.3 Thyroid Mass [SDL]</div>
      <div class="case-card endocrinology" data-title="17.4 Cushing's Disease [SDL]">17.4 Cushing's Disease [SDL]</div>
      <div class="case-card endocrinology" data-title="17.5 Adrenal Insufficiency">17.5 Adrenal Insufficiency</div>
      <div class="case-card endocrinology" data-title="17.6 Calcium Metabolism Disorders">17.6 Calcium Metabolism Disorders</div>
    </div>

    <!-- Week 18 - O&G -->
    <div class="week" data-specialties="og">Week 18 - O&amp;G</div>
    <div class="case-grid">
      <div class="case-card og" data-title="18.1 Menorrhagia">18.1 Menorrhagia</div>
      <div class="case-card og" data-title="18.2 Post-Menopausal Bleeding">18.2 Post-Menopausal Bleeding</div>
      <div class="case-card og" data-title="18.3 Acute Pelvic Pain (Benign Ovarian Disease)">18.3 Acute Pelvic Pain (Benign Ovarian Disease)</div>
      <div class="case-card og" data-title="18.4 Endometriosis">18.4 Endometriosis</div>
      <div class="case-card og" data-title="18.5 Premalignant Disease of the Cervix">18.5 Premalignant Disease of the Cervix</div>
    </div>

    <!-- Week 19 - Ortho Surgery -->
    <div class="week" data-specialties="ortho">Week 19 - Ortho Surgery</div>
    <div class="case-grid">
      <div class="case-card ortho" data-title="19.1 Osteoarthritis">19.1 Osteoarthritis</div>
      <div class="case-card ortho" data-title="19.2 Septic Arthritis">19.2 Septic Arthritis</div>
      <div class="case-card ortho" data-title="19.3 Bony Lumps">19.3 Bony Lumps</div>
      <div class="case-card ortho" data-title="19.4 Gout">19.4 Gout</div>
      <div class="case-card ortho" data-title="19.5 Knee Injuries">19.5 Knee Injuries</div>
      <div class="case-card ortho" data-title="19.6 Paediatric Fractures">19.6 Paediatric Fractures</div>
    </div>

    <!-- Week 20 - Paediatrics -->
    <div class="week" data-specialties="paediatrics">Week 20 - Paediatrics</div>
    <div class="case-grid">
      <div class="case-card paediatrics" data-title="20.1 Child with Cough">20.1 Child with Cough</div>
      <div class="case-card paediatrics" data-title="20.2 Child with Wheeze">20.2 Child with Wheeze</div>
      <div class="case-card paediatrics" data-title="20.3 The Atopic Child">20.3 The Atopic Child</div>
      <div class="case-card paediatrics" data-title="20.4 Asthma (Acute Exacerbation)">20.4 Asthma (Acute Exacerbation)</div>
      <div class="case-card paediatrics" data-title="20.5 Child with Stridor">20.5 Child with Stridor</div>
      <div class="case-card paediatrics" data-title="20.6 Pneumonia">20.6 Pneumonia</div>
    </div>

    <!-- Week 21 - Gastroenterology -->
    <div class="week" data-specialties="gastroenterology">Week 21 - Gastroenterology</div>
    <div class="case-grid">
      <div class="case-card gastroenterology" data-title="21.1 Oesophageal Carcinoma">21.1 Oesophageal Carcinoma</div>
      <div class="case-card gastroenterology" data-title="21.2 Gastric Ulcers &amp; Gastric Cancer">21.2 Gastric Ulcers &amp; Gastric Cancer</div>
      <div class="case-card gastroenterology" data-title="21.3 Coeliac [SDL]">21.3 Coeliac [SDL]</div>
      <div class="case-card gastroenterology" data-title="21.4 Constipation [SDL]">21.4 Constipation [SDL]</div>
      <div class="case-card gastroenterology" data-title="21.5 IBS">21.5 IBS</div>
    </div>

    <!-- Week 22 - Neurology -->
    <div class="week" data-specialties="neurology">Week 22 - Neurology</div>
    <div class="case-grid">
      <div class="case-card neurology" data-title="22.1 Stroke &amp; TIA">22.1 Stroke &amp; TIA</div>
      <div class="case-card neurology" data-title="22.2 Multiple Sclerosis">22.2 Multiple Sclerosis</div>
      <div class="case-card neurology" data-title="22.3 Alzheimers">22.3 Alzheimers</div>
      <div class="case-card neurology" data-title="22.4 Parkinsons &amp; MND">22.4 Parkinsons &amp; MND</div>
      <div class="case-card neurology" data-title="22.5 Meningitis [SDL]">22.5 Meningitis [SDL]</div>
      <div class="case-card neurology" data-title="22.6 Creutzfeldt-Jacob Disease [SDL]">22.6 Creutzfeldt-Jacob Disease [SDL]</div>
      <div class="case-card neurology" data-title="22.7 Intracranial Tumours &amp; Hydrocephalus [SDL]">22.7 Intracranial Tumours &amp; Hydrocephalus [SDL]</div>
    </div>

    <!-- Week 23 - Paediatrics -->
    <div class="week" data-specialties="paediatrics">Week 23 - Paediatrics</div>
    <div class="case-grid">
      <div class="case-card paediatrics" data-title="23.1 Congenital Heart Disease (Acyanotic)">23.1 Congenital Heart Disease (Acyanotic)</div>
      <div class="case-card paediatrics" data-title="23.2 Congenital Heart Disease (Cyanotic)">23.2 Congenital Heart Disease (Cyanotic)</div>
      <div class="case-card paediatrics" data-title="23.3 Nasolacrimal Duct Blockage">23.3 Nasolacrimal Duct Blockage</div>
      <div class="case-card paediatrics" data-title="23.4 Strabismus">23.4 Strabismus</div>
      <div class="case-card paediatrics" data-title="23.5 Laryngomalacia">23.5 Laryngomalacia</div>
    </div>

    <!-- Week 24 - O&G -->
    <div class="week" data-specialties="og">Week 24 - O&amp;G</div>
    <div class="case-grid">
      <div class="case-card og" data-title="24.2 Secondary Amenorrhoea">24.2 Secondary Amenorrhoea</div>
      <div class="case-card og" data-title="24.3 PCOS">24.3 PCOS</div>
      <div class="case-card og" data-title="24.4 Infertility">24.4 Infertility</div>
      <div class="case-card og" data-title="24.5 Primary Amenorrhoea [SDL]">24.5 Primary Amenorrhoea [SDL]</div>
      <div class="case-card og" data-title="24.6 Hirsutism [SDL]">24.6 Hirsutism [SDL]</div>
      <div class="case-card og" data-title="24.7 Pre-Menstrual Syndrome &amp; Dysphoric Disorder">24.7 Pre-Menstrual Syndrome &amp; Dysphoric Disorder</div>
    </div>

    <!-- Week 25 - Psychiatry (NEW; TITLES FROM SCREENSHOT REQUIRED) -->
    <div class="week" data-specialties="psychiatry">Week 25 - Psychiatry</div>
    <div class="case-grid">
      <!-- TODO: Replace the six placeholders below with exact case names from the screenshot (starting with 25) -->
      <div class="case-card psychiatry" data-title="25.1 Self Harm & Suicide [SDL]">25.1 Self Harm & Suicide [SDL]</div>
      <div class="case-card psychiatry" data-title="25.2 Anxiety Disorders">25.2 Anxiety Disorders</div>
      <div class="case-card psychiatry" data-title="25.3 Depression">25.3 Depression</div>
      <div class="case-card psychiatry" data-title="25.4 Bipolar Disorder">25.4 Bipolar Disorder</div>
      <div class="case-card psychiatry" data-title="25.5 (from screenshot)">25.5 (from screenshot)</div>
      <div class="case-card psychiatry" data-title="25.6 (from screenshot)">25.6 (from screenshot)</div>
    </div>

    <!-- Week 26 - Rheumatology (NEW) -->
    <div class="week" data-specialties="rheumatology">Week 26 - Rheumatology</div>
    <div class="case-grid">
      <div class="case-card rheumatology" data-title="26.1 Rheumatoid Arthritis">26.1 Rheumatoid Arthritis</div>
      <div class="case-card rheumatology" data-title="26.2 Ankylosing Spondylitis">26.2 Ankylosing Spondylitis</div>
      <div class="case-card rheumatology" data-title="26.3 Polymyalgia Rheumatica & Temporal Arteritis">26.3 Polymyalgia Rheumatica & Temporal Arteritis</div>
      <div class="case-card rheumatology" data-title="26.4 Fibromyalgia [SDL]">26.4 Fibromyalgia [SDL]</div>
      <div class="case-card rheumatology" data-title="26.5 Osteoporosis">26.5 Osteoporosis</div>
      <div class="case-card rheumatology" data-title="26.6 Paget’s Disease (bone)">26.6 Paget’s Disease (bone)</div>
    </div>

    <!-- Week 27 - Vascular (NEW) -->
    <div class="week" data-specialties="vascular">Week 27 - Vascular</div>
    <div class="case-grid">
      <div class="case-card vascular" data-title="27.1 Asthma Exacerbation">27.1 Asthma Exacerbation</div>
      <div class="case-card vascular" data-title="27.2 Severe Asthma">27.2 Severe Asthma</div>
      <div class="case-card vascular" data-title="27.3 COPD">27.3 COPD</div>
      <div class="case-card vascular" data-title="27.4 Bronchiectasis [SDL]">27.4 Bronchiectasis [SDL]</div>
      <div class="case-card vascular" data-title="27.5 Cystic Fibrosis [SDL]">27.5 Cystic Fibrosis [SDL]</div>
      <div class="case-card vascular" data-title="27.6 Community Acquired Pneumonia">27.6 Community Acquired Pneumonia</div>
    </div>

    <!-- Week 28 - Paediatrics -->
    <div class="week" data-specialties="paediatrics">Week 28 - Paediatrics</div>
    <div class="case-grid">
      <div class="case-card paediatrics" data-title="28.1 UTI">28.1 UTI</div>
      <div class="case-card paediatrics" data-title="28.2 Glomerulonephritis">28.2 Glomerulonephritis</div>
      <div class="case-card paediatrics" data-title="28.3 Nephrotic Syndrome">28.3 Nephrotic Syndrome</div>
      <div class="case-card paediatrics" data-title="28.4 Anaemia (Nutritional)">28.4 Anaemia (Nutritional)</div>
      <div class="case-card paediatrics" data-title="28.5 Purpuric Rash">28.5 Purpuric Rash</div>
      <div class="case-card paediatrics" data-title="28.6 Acute Lymphoblastic Leukaemia">28.6 Acute Lymphoblastic Leukaemia</div>
    </div>

    <!-- Week 29 - O&G (NEW) -->
    <div class="week" data-specialties="og">Week 29 - O&amp;G</div>
    <div class="case-grid">
      <div class="case-card og" data-title="29.1 Urinary Stress Incontinence">29.1 Urinary Stress Incontinence</div>
      <div class="case-card og" data-title="29.2 Urinary Urge Incontinence">29.2 Urinary Urge Incontinence</div>
      <div class="case-card og" data-title="29.3 Uterine Prolapse">29.3 Uterine Prolapse</div>
      <div class="case-card og" data-title="29.4 Perimenopause & Menopause">29.4 Perimenopause & Menopause</div>
      <div class="case-card og" data-title="29.5 Menopause">29.5 Menopause</div>
      <div class="case-card og" data-title="29.6 Candidiasis [SDL]">29.6 Candidiasis [SDL]</div>
      <div class="case-card og" data-title="29.7 Genital Herpes [SDL]">29.7 Genital Herpes [SDL]</div>
      <div class="case-card og" data-title="29.8 Unplanned Pregnancy [SDL]">29.8 Unplanned Pregnancy [SDL]</div>
    </div>

    <!-- Week 30 - Haematology (NEW) -->
    <div class="week" data-specialties="haematology">Week 30 - Haematology</div>
    <div class="case-grid">
      <div class="case-card haematology" data-title="30.1 Microcytic Anaemia">30.1 Microcytic Anaemia</div>
      <div class="case-card haematology" data-title="30.2 Macrocytic Anaemia">30.2 Macrocytic Anaemia</div>
      <div class="case-card haematology" data-title="30.3 Aplastic Anaemia [SDL]">30.3 Aplastic Anaemia [SDL]</div>
      <div class="case-card haematology" data-title="30.4 Haemolytic Anaemia [SDL]">30.4 Haemolytic Anaemia [SDL]</div>
      <div class="case-card haematology" data-title="30.5 Myelofibrosis">30.5 Myelofibrosis</div>
      <div class="case-card haematology" data-title="30.6 Thrombocytopaenia">30.6 Thrombocytopaenia</div>
    </div>
  </div>

  <!-- FOOTER -->
  <footer>Powered by <span>ShepTech</span></footer>

  <!-- MODAL STRUCTURE -->
  

  <script>
    /* === HEADER HIDE/SHOW ON SCROLL === */
    let lastScrollTop = 0;
    const header = document.getElementById("pageHeader");
    window.addEventListener("scroll", () => {
      const currentScroll = window.pageYOffset || document.documentElement.scrollTop;
      if (currentScroll > lastScrollTop && currentScroll > 150) {
        header.classList.add("hidden");
      } else if (currentScroll < lastScrollTop - 10) {
        header.classList.remove("hidden");
      }
      lastScrollTop = currentScroll <= 0 ? 0 : currentScroll;
    });

    /* === MODAL BEHAVIOUR === */
    const modalBackdrop = document.getElementById('modalBackdrop');
    const modalClose = document.getElementById('modalClose');
    const modalTitle = document.getElementById('modalTitle');
    const modalBody = document.getElementById('modalBody');

    function openModal(title, bodyHTML) {
      modalTitle.textContent = title || 'Case';
      modalBody.innerHTML = bodyHTML || '<p>Case will be available soon.</p>';
      modalBackdrop.classList.add('active');
      document.body.style.overflow = 'hidden';
    }
    function closeModal() {
      modalBackdrop.classList.remove('active');
      document.body.style.overflow = '';
    }

    modalClose.addEventListener('click', closeModal);
    modalBackdrop.addEventListener('click', (e) => {
      // Close when clicking outside the modal card
      const card = e.target.closest('.modal-card');
      if (!card || card === e.target) {
        closeModal();
      }
    });
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeModal();
    });

    // Bind all case cards
    document.querySelectorAll('.case-card').forEach(card => {
      card.addEventListener('click', () => {
        const title = card.getAttribute('data-title') || card.textContent.trim();
        openModal(title, '<p>Case will be available soon.</p>');
      });
    });

    /* === FILTERING & COUNTS (SCP2 behavior preserved) === */
    const specialties = document.querySelectorAll('.specialty');
    const groupHeaders = document.querySelectorAll('h2[data-group]');
    const weekSections = document.querySelectorAll('.week');

    function showByFilters(filters) {
      // Show/hide cards
      document.querySelectorAll('.case-card').forEach(card => {
        card.style.display = filters.some(f => card.classList.contains(f)) ? 'flex' : 'none';
      });
      // Show/hide week sections if they have visible cards
      weekSections.forEach(week => {
        const grid = week.nextElementSibling;
        const hasVisible = Array.from(grid.querySelectorAll('.case-card'))
          .some(c => c.style.display !== 'none');
        week.style.display = hasVisible ? 'block' : 'none';
        grid.style.display = hasVisible ? 'grid' : 'none';
      });
    }

    function applyFilterBySpecialty(filter) {
      showByFilters([filter]);
    }

    specialties.forEach(spec => {
      spec.addEventListener('click', () => {
        specialties.forEach(s => s.classList.remove('active'));
        groupHeaders.forEach(g => g.classList.remove('active'));
        spec.classList.add('active');
        saveCurrentFilter(spec.dataset.filter);
        applyFilterBySpecialty(spec.dataset.filter);
      });
    });

    groupHeaders.forEach(group => {
      group.addEventListener('click', () => {
        specialties.forEach(s => s.classList.remove('active'));
        groupHeaders.forEach(g => g.classList.remove('active'));
        group.classList.add('active');
        const groupName = group.dataset.group;
        let filters = [];
        if (groupName === 'all') {
          filters = ['cardiology','psychiatry','paediatrics','neurology','gastroenterology','endocrinology','renal','respiratory','rheumatology','og','haematology','git','general','breast','ortho','vascular'];
          saveCurrentFilter('all');
        } else if (groupName === 'medicine') {
          filters = ['cardiology','psychiatry','paediatrics','neurology','gastroenterology','endocrinology','renal','respiratory','rheumatology','og','haematology'];
          saveCurrentFilter('medicine');
        } else if (groupName === 'surgery') {
          filters = ['git','general','breast','ortho','vascular'];
          saveCurrentFilter('surgery');
        }
        showByFilters(filters);
      });
    });

    // Local storage for current filter
    let currentFilter = 'all';
    function saveCurrentFilter(filter) {
      currentFilter = filter;
      try { localStorage.setItem('currentFilter', filter); } catch {}
    }

    // Live counts (auto-updating)
    function updateCounts() {
      const specEls = document.querySelectorAll('.specialty');
      const groupTotals = { all: 0, medicine: 0, surgery: 0 };

      specEls.forEach(spec => {
        const filter = spec.dataset.filter;
        const count = document.querySelectorAll('.case-card.' + filter).length;
        spec.querySelector('.count').textContent = `(${count})`;

        groupTotals.all += count;
        if (['cardiology','psychiatry','paediatrics','neurology','gastroenterology','endocrinology','renal','respiratory','rheumatology','og','haematology'].includes(filter)) {
          groupTotals.medicine += count;
        } else if (['git','general','breast','ortho','vascular'].includes(filter)) {
          groupTotals.surgery += count;
        }
      });

      document.querySelector('h2[data-group="all"] .count').textContent = `(${groupTotals.all})`;
      document.querySelector('h2[data-group="medicine"] .count').textContent = `(${groupTotals.medicine})`;
      document.querySelector('h2[data-group="surgery"] .count').textContent = `(${groupTotals.surgery})`;
    }
    updateCounts();

    // Initial filter (URL ?filter=... or stored)
    const urlParams = new URLSearchParams(window.location.search);
    const filterParam = urlParams.get('filter');
    const storedFilter = (function(){ try { return localStorage.getItem('currentFilter'); } catch { return null; }})();
    const initialFilter = filterParam || storedFilter || 'all';

    if (['all','medicine','surgery'].includes(initialFilter)) {
      const targetGroup = document.querySelector(`h2[data-group="${initialFilter}"]`);
      if (targetGroup) targetGroup.click();
    } else {
      const targetSpec = document.querySelector(`.specialty[data-filter="${initialFilter}"]`);
      if (targetSpec) targetSpec.click();
      else document.querySelector('h2[data-group="all"]').click();
    }
  </script>

  <div class="modal-backdrop" id="modalBackdrop" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modal-header">
        <h3 class="modal-title" id="modalTitle">Case</h3>
        <button class="modal-close" id="modalCloseBtn" aria-label="Close">×</button>
      </div>
      <div class="modal-body" id="modalBody"></div>
    </div>
  </div>


  <script>
    document.querySelectorAll('.case-card').forEach(card => {
      card.addEventListener('click', () => {
        const title = card.getAttribute('data-title') || card.textContent.trim();
        if (typeof window.openModal === 'function') window.openModal(title);
      });
    });
  </script>


  
  <script>
    const week30 = JSON.parse(document.getElementById('week30Data').textContent);
    function renderCaseToModal(title) { 
      const body = document.getElementById('modalBody');
      const titleEl = document.getElementById('modalTitle');
      titleEl.textContent = title;
      if (week30[title]) {
        body.innerHTML = week30[title].case_html + week30[title].qa_html;
      } else {
        body.innerHTML = `
          <div class="meta"></div>
          <div class="section">
            <h3>Case</h3>
            <div class="case-text"><p>Case will be available soon.</p></div>
          </div>
          <div class="section">
            <h3>Questions</h3>
            <div class="qa-card">
              <div class="qa-q">Questions will appear here when this case is populated.</div>
            </div>
          </div>`;
      }
      // toggles
      body.querySelectorAll('.qa-toggle').forEach(btn => {
        const id = btn.getAttribute('data-target');
        const target = body.querySelector('#' + CSS.escape(id));
        if (!target) return;
        target.style.display = 'none';
        btn.addEventListener('click', () => {
          const open = target.style.display !== 'none';
          target.style.display = open ? 'none' : 'block';
          btn.textContent = open ? 'Show Answer' : 'Hide Answer';
        });
      });
    }
    // Override openModal for all cases
    (function(){
      const oldOpen = window.openModal;
      window.openModal = function(title) {
        renderCaseToModal(title);
        document.getElementById('modalBackdrop').classList.add('active');
        document.body.style.overflow = 'hidden';
      };
    })();
    // Close handlers
    function closeModal() {
      document.getElementById('modalBackdrop').classList.remove('active');
      document.body.style.overflow = '';
    }
    document.addEventListener('click', (e) => {
      if (e.target && (e.target.id === 'modalBackLink' || e.target.id === 'modalCloseBtn')) closeModal();
    });
  </script>


  <script>
    (function(){
      const specialties = Array.from(document.querySelectorAll('.specialty'));
      const groupHeaders = Array.from(document.querySelectorAll('h2[data-group]'));
      const weeks = Array.from(document.querySelectorAll('.week'));

      function showByFilters(filters) {
        const cards = Array.from(document.querySelectorAll('.case-card'));
        cards.forEach(card => {
          card.style.display = filters.some(f => card.classList.contains(f)) ? 'flex' : 'none';
        });
        // Show/hide weeks if they contain any visible cards
        weeks.forEach(week => {
          const grid = week.nextElementSibling;
          const visible = Array.from(grid.querySelectorAll('.case-card')).some(c => c.style.display !== 'none');
          week.style.display = visible ? 'block' : 'none';
          grid.style.display = visible ? 'grid' : 'none';
        });
      }

      function updateCounts() {
        const specEls = Array.from(document.querySelectorAll('.specialty'));
        const groupTotals = { all: 0, medicine: 0, surgery: 0 };
        function countFor(cls){ return document.querySelectorAll('.case-card.' + cls).length; }
        specEls.forEach(spec => {
          const cls = spec.dataset.filter;
          const count = countFor(cls);
          const span = spec.querySelector('.count');
          if (span) span.textContent = '(' + count + ')';
          if (['cardiology','psychiatry','paediatrics','neurology','gastroenterology','endocrinology','renal','respiratory','rheumatology','og','haematology'].includes(cls)) {
            groupTotals.medicine += count;
          } else {
            groupTotals.surgery += count;
          }
          groupTotals.all += count;
        });
        const allEl = document.querySelector('h2[data-group="all"] .count');
        const medEl = document.querySelector('h2[data-group="medicine"] .count');
        const surgEl = document.querySelector('h2[data-group="surgery"] .count');
        if (allEl) allEl.textContent = '(' + groupTotals.all + ')';
        if (medEl) medEl.textContent = '(' + groupTotals.medicine + ')';
        if (surgEl) surgEl.textContent = '(' + groupTotals.surgery + ')';
      }

      function clearActive() {
        groupHeaders.forEach(g => g.classList.remove('active'));
        specialties.forEach(s => s.classList.remove('active'));
      }

      specialties.forEach(spec => {
        spec.addEventListener('click', () => {
          clearActive();
          spec.classList.add('active');
          const filter = spec.dataset.filter;
          showByFilters([filter]);
          try { localStorage.setItem('currentFilter', filter); } catch {}
        });
      });

      groupHeaders.forEach(group => {
        group.addEventListener('click', () => {
          clearActive();
          group.classList.add('active');
          const groupName = group.dataset.group;
          let filters = [];
          if (groupName === 'all') {
            filters = ['cardiology','psychiatry','paediatrics','neurology','gastroenterology','endocrinology','renal','respiratory','rheumatology','og','haematology','git','general','breast','ortho','vascular'];
          } else if (groupName === 'medicine') {
            filters = ['cardiology','psychiatry','paediatrics','neurology','gastroenterology','endocrinology','renal','respiratory','rheumatology','og','haematology'];
          } else if (groupName === 'surgery') {
            filters = ['git','general','breast','ortho','vascular'];
          }
          showByFilters(filters);
          try { localStorage.setItem('currentFilter', groupName); } catch {}
        });
      });

      // initial
      updateCounts();
      const stored = (function(){ try { return localStorage.getItem('currentFilter'); } catch(e){ return null; } })();
      const params = new URLSearchParams(window.location.search);
      const param = params.get('filter');
      const initial = param || stored || 'all';
      if (['all','medicine','surgery'].includes(initial)) {
        const el = document.querySelector('h2[data-group="'+initial+'"]');
        if (el) el.click();
      } else {
        const el = document.querySelector('.specialty[data-filter="'+initial+'"]');
        if (el) el.click(); else { const all = document.querySelector('h2[data-group="all"]'); if (all) all.click(); }
      }
      // expose for debugging
      window._updateCounts = updateCounts;
    })();
  </script>


  <script id="week30Data" type="application/json">{"30.1 Microcytic Anaemia": {"case_html": "<div class=\"section\"><h3>Case</h3><div class=\"case-text\"><p>Presentations                                        Tutor Handbook                           Page 9 of 37  <br> <br> <br>CASE ONE <br> <br>Short case number: 3_30_1 <br>Category: Immune and haemopoietic systems <br>Discipline: Medicine <br>Setting: General Practice <br>Topic: Anaemia_Microcytic <br> <br>Case <br>Gabriella Pesce is 24 years old and a regular patient of the practice. She presents complaining <br>of worsening fatigue. Gabriella has often discussed her weight and diet with you and you <br>know that over the last few years she adopted a vegetarian diet to try and keep her weight <br>under control. You comment that she looks paler that normal and she concurs that her family <br>also expressed concerns about how pale she looks. <br>You are concerned that Gabriella may have developed anaemia as a result of her diet.</p></div></div>", "qa_html": "<div class=\"section\"><h3>Questions</h3>\n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">1.</span> What are the key features of history and examination in your assessment of Gabriella \nand why?</div>\n            <button class=\"qa-toggle\" data-target=\"ans_1\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_1\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">2.</span> What is anaemia?</div>\n            <button class=\"qa-toggle\" data-target=\"ans_2\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_2\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">3.</span> You explain to Gabriella that you think that lack of iron in her diet has caused anaemia. \nGabriella asks why does lack of iron cause anaemia. What would you explain to her?</div>\n            <button class=\"qa-toggle\" data-target=\"ans_3\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_3\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">4.</span> Gabriella’s investigations demonstrate a Hb 80 g/L and  microcytic red cells  \non the blood film. [similar to the picture \nshown]. What are the possible causes of this \nclinical picture? How would the results of \niron study tests assist in distinguishing \nbetween these causes?</div>\n            <button class=\"qa-toggle\" data-target=\"ans_4\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_4\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">5.</span> Outline your plans to investigate \nGabriella’s anaemia.</div>\n            <button class=\"qa-toggle\" data-target=\"ans_5\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_5\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">6.</span> Your management of Gabriella includes \nincreasing iron content of her diet. Explain the process iron absorption and metabolism.</div>\n            <button class=\"qa-toggle\" data-target=\"ans_6\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_6\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        </div>"}, "30.2 Macrocytic Anaemia": {"case_html": "<div class=\"section\"><h3>Case</h3><div class=\"case-text\"><p>Presentations                                        Tutor Handbook                           Page 13 of 37  <br> <br> <br>CASE TWO <br> <br>Short case number: 3_30_2 <br>Category: Immune and haemopoietic systems <br>Discipline: Medicine <br>Setting: General Practice <br>Topic: Anaemia_macrocytic <br> <br>Case <br> <br>Maude McArthur, a 75 year old widow from the nearby <br>retirement village presents complaining of a sore tongue. It <br>has become quite difficult to eat lately and she is really only <br>having tea and toast. You observe that Maude’s tongue is <br>quite inflamed as well as the corners of her mouth. <br>You are concerned about Maude’s diet and think she may <br>have a nutritional problem.</p></div></div>", "qa_html": "<div class=\"section\"><h3>Questions</h3>\n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">1.</span> What are the key features of the history and examination in your assessment of Maude and \nwhy?</div>\n            <button class=\"qa-toggle\" data-target=\"ans_1\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_1\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">2.</span> What clinical findings would suggest a vitamin B12 \nand/or folate deficiency?</div>\n            <button class=\"qa-toggle\" data-target=\"ans_2\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_2\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">3.</span> Explain the role of Vitamin B12 and folate in red cell \nmetabolism.</div>\n            <button class=\"qa-toggle\" data-target=\"ans_3\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_3\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">4.</span> Preliminary investigations reveal that Maude has a \nmacrocytic anaemia. With a blood film similar to the one \npictured. Explain how B12 and folate results in macrocytic \nred blood cells.</div>\n            <button class=\"qa-toggle\" data-target=\"ans_4\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_4\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">5.</span> Further investigations reveal that Maude has a B12 \ndeficiency which is not really explained by her diet, as her diet has only recently changed. You \nare concerned that Maude may have pernicious anaemia. In revising the absorption and \ntransport of B12, explain pernicious anaemia and how it results in B12deficiency.</div>\n            <button class=\"qa-toggle\" data-target=\"ans_5\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_5\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">6.</span> Outline the investigations used in the diagnosis and assessment of pernicious anaemia. \n \nNote. From Kumar &amp; Clark’s Clinical Medicine (8th ed.) p.399, by P. Kumar and M.L. Clark, 2012, Edinburgh: \nSaunders Elsevier.</div>\n            <button class=\"qa-toggle\" data-target=\"ans_6\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_6\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        </div>"}, "30.3 Aplastic Anaemia [SDL]": {"case_html": "<div class=\"section\"><h3>Case</h3><div class=\"case-text\"><p>Presentations                                        Tutor Handbook                           Page 17 of 37  <br> <br> <br>CASE THREE <br> <br>Short case number: 3_30_3 <br>Category: Immune and haemopoietic systems <br>Discipline: Medicine <br>Setting: Hospital Ward <br>Topic: Anaemia_aplastic [SDL] <br> <br>Case <br> <br>You are the medical intern admitting 25 year old Julian <br>Barker, who has been referred to your consultant, via <br>his GP. Julian has been suffering with persistent thrush <br>infections in his mouth and gum bleeds.  <br>A full blood count has revealed that Julian is anaemic, <br>with a low neutrophil and platelet count.</p></div></div>", "qa_html": "<div class=\"section\"><h3>Questions</h3>\n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">1.</span> Julian’s provisional diagnosis is aplastic anaemia. What is aplastic anaemia?</div>\n            <button class=\"qa-toggle\" data-target=\"ans_1\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_1\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">2.</span> In your assessment of Julian what are the key features of history and examination and why?</div>\n            <button class=\"qa-toggle\" data-target=\"ans_2\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_2\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">3.</span> What clinical features are seen in aplastic anaemia and what is the underlying pathophysiology?</div>\n            <button class=\"qa-toggle\" data-target=\"ans_3\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_3\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">4.</span> What investigation findings are associated with a poor prognosis in aplastic anaemia?</div>\n            <button class=\"qa-toggle\" data-target=\"ans_4\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_4\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">5.</span> As part of Julian’s management he requires protective isolation, explain why this is necessary \nand how it is achieved on a hospital ward.</div>\n            <button class=\"qa-toggle\" data-target=\"ans_5\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_5\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">6.</span> Outline the principles of supportive care in the management of bone marrow failure.</div>\n            <button class=\"qa-toggle\" data-target=\"ans_6\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_6\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">7.</span> Julian becomes increasingly symptomatic due to his anaemia and a blood transfusion is \nrequired. Julian’s blood group is B positive, explain what this means in terms of the ABO and Rh \nclassification system of blood grouping.</div>\n            <button class=\"qa-toggle\" data-target=\"ans_7\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_7\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">8.</span> You are required to obtain informed consent from Julian for the blood transfusion.  Outline the \npossible immunological and non-immunological complications of blood transfusions.</div>\n            <button class=\"qa-toggle\" data-target=\"ans_8\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_8\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">9.</span> It is important when administering a blood transfusion to ensure that the correct blood is given. \nOutline the steps that are undertaken to minimise error in the administration of a blood \ntransfusion.</div>\n            <button class=\"qa-toggle\" data-target=\"ans_9\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_9\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        </div>"}, "30.4 Haemolytic Anaemia [SDL]": {"case_html": "<div class=\"section\"><h3>Case</h3><div class=\"case-text\"><p>Presentations                                        Tutor Handbook                           Page 24 of 37  <br> <br> <br>CASE FOUR <br> <br>Short case number: 3_30_4 <br>Category: Immune and haemopoietic systems <br>Discipline: Medicine <br>Setting: Emergency Department <br>Topic: Haemolytic Anaemias [SDL]  <br> <br>Case <br>You are the intern in the emergency department; Ambrose Okeke who is 25 years old is <br>visiting from South Africa. He presents with severe pain in his left leg which has not been <br>relieved by panadeine forte. Ambrose has sickle cell disease and many episodes of similar <br>pain which occasionally require analgesia with narcotics. <br>You observe that he is in obvious pain and note that his temperature is elevated at 37.80C.</p></div></div>", "qa_html": "<div class=\"section\"><h3>Questions</h3>\n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">1.</span> What is the underlying pathophysiology of the severe bone pain experienced in patients with \nsickle cell disease? Detail the pathophysiology of the following clinical features seen in sickle cell \ndisease; anaemia, splenic sequestration and bone marrow aplasia.</div>\n            <button class=\"qa-toggle\" data-target=\"ans_1\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_1\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">2.</span> You recall that sickle cell disease causes a haemolytic anaemia, what is pathophysiology is seen \nin haemolytic anaemias and what are the consequences of haemolysis?</div>\n            <button class=\"qa-toggle\" data-target=\"ans_2\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_2\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">3.</span> What is the fate of haemoglobin in the plasma following haemolysis?</div>\n            <button class=\"qa-toggle\" data-target=\"ans_3\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_3\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">4.</span> In a flow chart summarise that investigations that assist in determining the cause of haemolysis.</div>\n            <button class=\"qa-toggle\" data-target=\"ans_4\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_4\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">5.</span> Investigations demonstrate that Josef is anaemic \nwith a haemoglobin of 80g/L with a high reticulocyte \ncount. His blood film is seen here. What features can be \nseen on the blood film?</div>\n            <button class=\"qa-toggle\" data-target=\"ans_5\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_5\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">6.</span> Describe the haemoglobin abnormality seen in \nsickle cell disease and the pathogenesis of sickle \nsyndromes that result in the sequelae of sickling.</div>\n            <button class=\"qa-toggle\" data-target=\"ans_6\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_6\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">7.</span> What are the principles of management of an acute \npainful crises in patients with sickle cell disease?</div>\n            <button class=\"qa-toggle\" data-target=\"ans_7\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_7\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">8.</span> Outline the long term problems seen with sickle cell anaemia and their underlying \npathophysiology.</div>\n            <button class=\"qa-toggle\" data-target=\"ans_8\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_8\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        </div>"}, "30.5 Myelofibrosis": {"case_html": "<div class=\"section\"><h3>Case</h3><div class=\"case-text\"><p>Presentations                                        Tutor Handbook                           Page 28 of 37  <br> <br> <br>CASE FIVE <br> <br>Short case number: 3_30_5 <br>Category: Immune and haemopoietic systems <br>Discipline: Medicine <br>Setting: Hospital Ward <br>Topic: Myeloproliferative disorders_myelofibrosis <br> <br>Case <br> <br>You are the medical intern currently working with the haematology team. Margaret Lewis, <br>who is 60 years old presented to her GP recently with a 5-month history of increasing <br>tiredness and weight loss. On examination her GP noted an enlarged spleen. Her FBC has <br>demonstrated an anaemia. She has been referred in by the haematologist for further <br>investigation; the haematologist suspects a myeloproliferative disorder and/or myelofibrosis.</p></div></div>", "qa_html": "<div class=\"section\"><h3>Questions</h3>\n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">1.</span> Noting her splenomegaly, what are the key features of your history and examination \nand why?</div>\n            <button class=\"qa-toggle\" data-target=\"ans_1\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_1\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">2.</span> Review the anatomy and function of the spleen and explain the physiological effects of \nhypersplenism.</div>\n            <button class=\"qa-toggle\" data-target=\"ans_2\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_2\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">3.</span> What are the clinical features of myelofibrosis and hypersplenism and what is the \nunderlying pathophysiology?</div>\n            <button class=\"qa-toggle\" data-target=\"ans_3\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_3\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">4.</span> What investigations are often undertaken in the assessment of myelofibrosis and why?</div>\n            <button class=\"qa-toggle\" data-target=\"ans_4\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_4\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">5.</span> Margaret’s condition deteriorates with worsening anaemia and thrombocytopaenia and \nshe requires a splenectomy. What are the problems that can occur post splenectomy?</div>\n            <button class=\"qa-toggle\" data-target=\"ans_5\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_5\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">6.</span> Margaret is subsequently discharged to her GPs care. As part of her ongoing \nmanagement, what recommendations would you make regarding prophylaxis against \ninfection?</div>\n            <button class=\"qa-toggle\" data-target=\"ans_6\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_6\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        </div>"}, "30.6 Thrombocytopaenia": {"case_html": "<div class=\"section\"><h3>Case</h3><div class=\"case-text\"><p>Presentations                                        Tutor Handbook                           Page 33 of 37  <br> <br> <br>CASE  SIX <br>Short case number: 3_30_6 <br>Category: Immune and haemopoietic systems <br>Discipline: Medicine <br>Setting: General Practice <br>Topic: Bleeding disorders_thromobcytopaenia <br> <br>Case <br> <br> <br>Sybilla Hanson, who is 35 years old presents with bruising on her legs, they <br>have developed quite quickly. There is no history of trauma and she has not <br>been unwell. <br> <br>You observe that she has quite marked purpura over both legs.</p></div></div>", "qa_html": "<div class=\"section\"><h3>Questions</h3>\n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">1.</span> What are the key features of your history and examination and why?</div>\n            <button class=\"qa-toggle\" data-target=\"ans_1\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_1\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">2.</span> You are concerned that there may be a problem with haemostasis. Describe the \nfunction and the role of the vessel wall, platelets, coagulation pathway and fibrinolysis \nin normal haemostasis.</div>\n            <button class=\"qa-toggle\" data-target=\"ans_2\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_2\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">3.</span> In the investigation of a possible bleeding disorder what investigations would you \nundertake and why?</div>\n            <button class=\"qa-toggle\" data-target=\"ans_3\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_3\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">4.</span> Sybilla’s full blood count indicates that she is thrombocytopaenic with a platelet count \nof 20 x 109/L. What is thrombocytopaenia and what are the clinical effects caused by \ndiffering levels of platelet count?</div>\n            <button class=\"qa-toggle\" data-target=\"ans_4\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_4\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">5.</span> Sybilla is referred to a haematologist who diagnoses immune thrombocytopaenic \npurpura [ITP]. What is ITP and how does the clinical picture differ from Thrombotic \nthrombocytopaenic purpura [TTP]?</div>\n            <button class=\"qa-toggle\" data-target=\"ans_5\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_5\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        \n          <div class=\"qa-card\">\n            <div class=\"qa-q\"><span class=\"q-num\">6.</span> Outline the stepwise approach to the management of patients with ITP.</div>\n            <button class=\"qa-toggle\" data-target=\"ans_6\">Hide Answer</button>\n            <div class=\"qa-a\" id=\"ans_6\" style=\"display:block;\"><p>(Answer not provided.)</p></div>\n          </div>\n        </div>"}}</script>
  <script>
    const week30 = JSON.parse(document.getElementById('week30Data').textContent);
    function renderCaseToModal(title) { 
      const body = document.getElementById('modalBody');
      const titleEl = document.getElementById('modalTitle');
      titleEl.textContent = title;
      if (week30[title]) {
        body.innerHTML = week30[title].case_html + week30[title].qa_html;
      } else {
        body.innerHTML = `
          <div class="section">
            <h3>Case</h3>
            <div class="case-text"><p>Case will be available soon.</p></div>
          </div>
          <div class="section">
            <h3>Questions</h3>
            <div class="qa-card">
              <div class="qa-q">Questions will appear here when this case is populated.</div>
            </div>
          </div>`;
      }
      // toggles (answers start visible)
      body.querySelectorAll('.qa-toggle').forEach(btn => {
        const id = btn.getAttribute('data-target');
        const target = body.querySelector('#' + CSS.escape(id));
        if (!target) return;
        btn.addEventListener('click', () => {
          const open = target.style.display !== 'none';
          target.style.display = open ? 'none' : 'block';
          btn.textContent = open ? 'Show Answer' : 'Hide Answer';
        });
      });
    }
    // Override openModal for all cases
    (function(){
      const oldOpen = window.openModal;
      window.openModal = function(title) {
        renderCaseToModal(title);
        document.getElementById('modalBackdrop').classList.add('active');
        document.body.style.overflow = 'hidden';
      };
    })();
    // Close button
    document.addEventListener('click', (e) => {
      if (e.target && e.target.id === 'modalCloseBtn') {
        document.getElementById('modalBackdrop').classList.remove('active');
        document.body.style.overflow = '';
      }
    });
  </script>


  <script>
    document.querySelectorAll('.case-card').forEach(card => {
      card.addEventListener('click', () => {
        const title = card.getAttribute('data-title') || card.textContent.trim();
        if (typeof window.openModal === 'function') window.openModal(title);
      });
    });
  </script>

</body>
</html>
